# Toteutusdokumentti

Ehkä vaikeinta tämänkaltaisessa työssä on päättää, mihin osa-alueisiin työ keskittyy ja millä tavoilla osa-alueita lähtisi lukuisista kiinnostavista vaihtoehdoista toteuttamaan. Vaikka aluksi tarkoitus oli keskittyä sanojen hakemiseen erilaisista konteksteista ja näiden kontekstien vertailuun, päädyin pidemmän päälle käyttämään enemmän aikaa sanojen ja tekstin automaattiseen generointiin. Tärkeimpänä tietorakenteena hakemisessa ja generoinnissa toimii trie-rakenne, jossa merkkijonon lisääminen ja hakeminen on O(s)-aikaista, missä s on merkkijonon pituus.

Verrattuna esimerkiksi hash-rakenteisiin, joilla olisi ollut myös mahdollista toteuttaa vastaava merkkijonojen talletusjärjestelmä, trie on monilta osin edullisempi. Trie-rakenteen pahimman tapauksen hakuaika on nopeampi, ja siinä missä hash-rakenteessa ylivuotoketjuista voi muodostua ongelma, ei niitä trie-rakenteessa esiinny. Lisäksi trie-rakenteen vakiokertoimet ovat huomattavasti pienemmät kuin hash-rakenteen, sillä hajautusfunktion luomista ei tarvita. Etuna on myös trien O(n)-tilavaativuus, missä n on erilaisten merkkien määrä.

Tällaisenaan toteutettu ohjelma soveltuisi pienin muokkauksin käyttöliittymässä tarjottavien hupiin ja pelillisyyteen liittyvien mahdollisuuksien lisäksi myös vakavampiin tarkoituksiin. Esimerkiksi suuren sanakirja-aineiston tallettaminen trie-rakenteeseen olisi tehokasta, koska yksittäiset sanat ovat pisimmilläänkin varsin lyhyitä, ja aikavaatimus on suhteessa sanojen pituuteen. Näin voitaisiin esimerkiksi toteuttaa varsin pienellä aika- ja tilavaatimuksella sähköinen sanakirja kaikista eurooppalaisten kielten sanoista. (Toki tavallisesti käytettävät sanakirjat ovat paljon muutakin kuin luetteloita sanoista, vaan niissä on tietoa esimerkiksi sanojen merkityksistä, esiintymiskonteksteista ja taivutuksesta, jolloin lisättävien merkkijonojen pituus voisi kasvaa huomattavasti yksittäisen sanan pituutta pidemmäksi. Pelkkä luettelo sanoista ja sananmuodoista voisi kuitenkin olla hyödyllinen esimerkiksi oikeinkirjoituksen tarkistuksessa.)

Trie-rakenteiden ansiosta ohjelmassa toteutettu sanojen tallettaminen ja generoiminen on siis varsin tehokasta eikä vie kovinkaan paljon muistia. Muita toiminnallisuuksia on toteutettu paljon geneerisemmän lista-rakenteen avulla, joka on rakennettu puurakenteen sijaan taulukoita hyödyntäen. Sen aika- ja tilavaatimukset ovat paljon suuremmat. Voisikin olla kiinnostavaa lähteä toteuttamaan esimerkiksi kontekstien vertailua muiden tietorakenteiden avulla, kuten triehen perustuvan suffiksipuun tai jonkinlaisen suffiksitaulun avulla.

Lisäksi itse luomani Lista-luokan toteutus ei vaikuta varsin tehokkaalta verrattuna Javan valmiisiin tietorakenteisiin, ja koska Trie hyödyntää listoja esimerkiksi solmujen lasten listauksessa, tarvitaan listarakenteita paljon ja usein. Javan valmiiden ArrayListien korvaaminen omalla Lista-rakenteellani hidastikin ohjelman toimintaa isoilla syötteillä, vaikka ArrayListitkään eivät ole tunnettuja tehokkuudestaan.

Syötteen koon vaikutus ohjelman toiminnan tehokkuuteen ei toisaalta teoriassa kuuluisi olla kovin suuri, sillä trielle annettu teksti luetaan vain kerran, minkä jälkeen puusta hakemisen kuuluisi riippua enää pisimmän merkkijonon pituudesta. Listarakenteiden hitauden vaikutus trien nopeuteen ei kuuluisi olla kovin suuri, sillä sanat lisätään triehen vain pieninä kirjaimina, eli jokaisella solmulla voi olla maksimissaan aakkosten verran eli 29 lasta. Ei siis pitäisi hidastaa ohjelman toimintaa erityisesti, vaikka listoista hakeminen onkin O(n)-aikaista.

Tekstin generoinnin kannalta voisi olla intutiivisena ajatuksena kiinnostavaa toteuttaa trie-rakenne, jossa solmujen arvoiksi lisätään merkkien sijasta kokonaisia sanoja eli Stringejä. Tällaiseen rakenteeseen liittyisi kuitenkin monia tehokkuusongelmia. Stringien käsittely on tietysti charien käsittelyä hitaampaa, mutta varsinainen ero rakenteiden tehokkuudessa tulisi lasten määrän valtavasta kasvusta. Solmun lasten maksimimäärä olisi tällöin käytännössä samaa luokkaa kuin parametrina annetun tekstin pituus, sillä suomen kielen sanojen määrä ylittäisi helposti tekstin pituuden. Suomen kielessä on noin 10 000 perusmuotoista sanaa, mutta käytännössä teksteissä sanat esiintyvät monissa eri taivutusmuodoissa, ja kaikkein sananmuotojen yhteismäärä arvoidaan suomen kielessä olevan noin 10^24 sanaa. Toki jos rakenteeseen lisättävä tietomäärä olisi esimerkiksi kaikkien suomenkielisten nettisivujen sisällön suuruinen, riittäisi edellä mainittu 10^24 sanaa yhden solmun lapsien maksimimääräksi. Niin pitkästä listasta hakeminen olisi käytännöllisesti katsoen mahdotonta, joten trielle annettavat solmut olisi tehokkaampaa laittaa johonkin muuhun rakenteeseen kuin listaan. Yksi mahdollisuus voisi olla antaa jokaiselle solmulle lapsien lista omana merkkejä sisältävänä trienä, josta hakeminen olisi jälleen lineaarista merkkijonon pituuteen nähden. Joka tapauksessa sanoja sisältävästä trie-rakenteesta tulisi puuna hyvin leveä mutta ei luultavastikaan kovinkaan korkea, sillä suomen kielessä lauseet ovat harvoin kovin pitkiä, ja sadankin sanan pituinen lause olisi jo poikkeuksellinen. Jokin muu rakenne, kuten edellä mainitut suffiksitaulut, voisi kaiken kaikkiaan soveltua kokonaisten sanojen tallettamiseen trietä paremmin.

Kontekstien hakeminen olisi kiinnostavaa yhdistää myös morfologisen jäsentämisen toimintaan. Ilman morfologista jäsennystä esimerkiksi lauseen "omenat tuoksuvat hyvältä" verbi "tuoksuvat" voi esiintyä samassa kontekstissa kuin esimerkiksi "maistuvat", mutta mikäli "maistuvat" esiintyisiin vain kontekstissa "omenat maistuvat hyvältäkin", ei yhteistä kontekstia löytyisi. Morfologinen jäsennin kuitenkin voisi tunnistaa sanojen "hyvältä" ja "hyvältäkin" olevan samaa kantaa, ja näin kontekstien hakeminen parantuisi.



Lähteet:

http://cses.fi/kkkk.pdf
http://en.wikipedia.org/wiki/Trie
http://en.wikipedia.org/wiki/Suffix_tree
http://en.wikipedia.org/wiki/Suffix_array
